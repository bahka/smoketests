### Что проверяют тесты:
- доступность всех перечисленных методов из раздела [Apps](https://vk.com/dev/apps)
- доступность методов по соответствующему ключу
- досутпность мтеодов в соответствующей версии api

### Что проверяется в ответе:
- если досутп правомерный - получаем ответ вида { response: {} }
- при ошибе - { error : {}}

### Запуск тестов
Для запуска тестов со старыми токенами выполните команду
```kotlin
./gradlew clean test
```
Для запуска тестов с новыми токенами выполните команду
```kotlin
./gradlew clean test -DserviceToken={token} -DcodeFlowToken={token} -DimplicitToken={token}
```
или в IDE выполните `Run 'Tests in "tests"'` для папки `src/test/java/tests`.

### Небходимые параметры для запуска (oauth обходить не стал):
* -Dtoken.service - сервисный токен приложения
* -Dtoken.codeFlowToken - пользовательский токен, полученный через [authorization code flow](https://vk.com/dev/authcode_flow_user) 
* -Dtoken.implicitToken - пользовательский токен, полученыый через [implicit flow](https://vk.com/dev/implicit_flow_user)

По дефолту указаны токены, которые были использованы мной в последний раз.

### Implicit token:

[Получить code](https://oauth.vk.com/authorize?client_id=<app_id>&display=page&redirect_uri=https://bot.com&scope=notify&response_type=code&v=5.92)
> https://bot.com/?code=XXXXX  

полученный код XXX вставить вместо {code} в следующий адрес

[Получить token](https://oauth.vk.com/access_token?client_id=<app_id>&client_secret=<secret_app_id>&redirect_uri=https://bot.com&code={code})

### Authorization code flow

[Получить токен](https://oauth.vk.com/authorize?client_id=v&display=page&redirect_uri=https://oauth.vk.com/blank.html&scope=friends&response_type=token&v=5.92&state=123456)

### Нерешённые проблемы
- версионность странная, по факту проверяется только v= , а что именно в ней передаётся - без разницы. 
- логика параметра версия не описана в документации, где-то она формирует ответ в другом формате (поэтому сделал пока dummy-шаблон для ответа) 
- токен администратора - как его получить? Я админ своего приложения, получил юзер-токен и мне запрещён доступ. Как?)
- автогенерация токенов для провреки доступов
- приложение не верефицировано, а значит часть запросов апрещено, а дургая - разрешена. Как определяется кому дать, а кому нет - непонятно.
- Access denied при запросое с user token. Как сделать запрос от админа я не понял.
- error: to many requests per second из-за скорости запросоов тестов
- не все тесты проходят =) из-за вышеперечисленных моментов.

### Допущения
- Для формирования запросов использован паттерн builder (just for fun), его можно заменить на параметры в интерфейсе запросов для retrofit
- Для запросов использован один объект Query там, где нет обязательных полей, где есть - созданы отдельные объекты. Это сделано для упрощения взаимодействия без лишней необходимости. Если что-то поменяется в запросе нужно будет создать отельный класс для этого запроса, можно сделать наследование для уменьшения колисества кода (сейчас это не было объектом интереса)
- Для ответов использован один объект VKResponse для упрощения.  Можно расширить через добавление специфичных объектов, описывающих структуру ответов на каждый запроос, но для 3.0 я видел другую структуру. Вопрос как много тут проверять.
- Если возвращается некокрректный объект - будет ошибка со стороны Jackson, если в корректном кейсе вернётся другая шаблон `{response : {}}`. Но в силу моего (не)понимания smoke этого достаточно для проверки, что ответ сформировался, так как для ошибки используется шаблон `{error: {...}`.
- текущая структура папок сделана под текущее состояние проекта, при расширении появятся необходимые подразделы
- я схлопнул все комиты в один, сорян. 
- я делал тесты на [фековом приложении](https://vk.com/editapp?id=6911438) без приложения, это может влиять на их работу.
- парралельность отключена
- в тестах есть throws IOException, которые бы хорошо ловить.